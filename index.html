<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Boutique Ã‰cologique Sticky</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Entete fixe avec titre et slogan -->
<div class="sticky-header">
  <div class="header-content">
    <h1>Boutique Ã‰cologique</h1>
    <p>Objets durables, naturels et inspirants pour un mode de vie plus vert.</p>
  </div>
  
</div>

<!-- Barre de recherche sticky -->
<div class="search-container">
    <input type="text" id="searchBar" placeholder="Rechercher un produit..." onkeyup="filtrerProduits()"> <!-- onkeyup permet le filtrage avec chaque caractere ajoutÃ©-->
</div>


<main>
  <!--Galerie-->
<section id="galerie-produits">
  <!--CatÃ©gorie 1-->
  <h2 class="categorie-label">Maison &amp; Cuisine</h2>
  <div class="produits-cat">
    <!--produit 1-->
    <div class="carte-produit" data-categorie="Maison">
      <div class="photo-produit"><img src="img/Gourde inox rÃ©utilisable.jpg" alt="Gourde Ã©cologie"></div>
      <h3>Gourde inox rÃ©utilisable</h3>
      <p class="desc">Alternative zÃ©ro dÃ©chet, sans BPA, idÃ©ale au quotidien.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Gourde inox rÃ©utilisable',14)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 14â€¯â‚¬</span></button>
      </div>
    </div>
    <!--produit 2-->
    <div class="carte-produit" data-categorie="Maison">
      <div class="photo-produit"><img src="img/brosse vaisaille.jpg" alt="Brosse vaisselle en bois"></div>
      <h3>Brosse vaisselle en bois</h3>
      <p class="desc">Brosse compostable, manche bois issu de forÃªts gÃ©rÃ©es durablement.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Brosse vaisselle en bois',5)">Ajouter au panier <span class="tooltip">Prixâ€¯: 5â€¯â‚¬</span></button>
      </div>
    </div>
    <!--produit 3-->
    <div class="carte-produit" data-categorie="Maison">
      <div class="photo-produit"><img src="img/Essuie-tout lavable.jpg" alt="Essuie-tout lavable"></div>
      <h3>Essuie-tout lavable</h3>
      <p class="desc">Tissu bio, remplace efficacement l'essuie-tout jetable.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Essuie-tout lavable',8)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 8â€¯â‚¬</span></button>
      </div>
    </div>
  </div>

  <!--CatÃ©gorie 2-->
  <h2 class="categorie-label">CosmÃ©tiques &amp; HygiÃ¨ne</h2>
  <div class="produits-cat">
    <!--produit 1-->
    <div class="carte-produit" data-categorie="Cosmetiques">
      <div class="photo-produit"><img src="img/Shampoing solide bio.jpg" alt="Shampoing solide bio"></div>
      <h3>Shampoing solide bio</h3>
      <p class="desc">Sans emballage plastique, doux pour cheveux et planÃ¨te.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Shampoing solide bio',7)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 7â€¯â‚¬</span></button>
      </div>
    </div>
    <!--produit 2-->
    <div class="carte-produit" data-categorie="Cosmetiques">
      <div class="photo-produit"><img src="img/Dentifrice naturel poudre.jpg" alt="Dentifrice naturel poudre"></div>
      <h3>Dentifrice naturel poudre</h3>
      <p class="desc">Formule recyclable, saine et respectueuse de l'environnement.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Dentifrice naturel poudre',6)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 6â€¯â‚¬</span></button>
      </div>
    </div>
    <!--produit 3-->
    <div class="carte-produit" data-categorie="Cosmetiques">
      <div class="photo-produit"><img src="img/Coton dÃ©maquillant rÃ©utilisable.jpg" alt="Coton dÃ©maquillant rÃ©utilisable"></div>
      <h3>Coton dÃ©maquillant rÃ©utilisable</h3>
      <p class="desc">Lavable en machine, lot de 5, longÃ©vitÃ© supÃ©rieure au jetable.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Coton dÃ©maquillant rÃ©utilisable',4)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 4â€¯â‚¬</span></button>
      </div>
    </div>
  </div>

  <!--CatÃ©gorie 3-->
  <h2 class="categorie-label">Accessoires &amp; Mode</h2>
  <div class="produits-cat">
    <!--produit 1-->
    <div class="carte-produit" data-categorie="Mode">
      <div class="photo-produit"><img src="img/Sac coton bio.jpg" alt="Sac coton bio"></div>
      <h3>Sac coton bio</h3>
      <p class="desc">Tote bag solide, coton agriculture biologique.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Sac coton bio',10)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 10â€¯â‚¬</span></button>
      </div>
    </div>
    <!--produit 2-->
    <div class="carte-produit" data-categorie="Mode">
      <div class="photo-produit"><img src="img/Lunettes de soleil bambou.jpg" alt="Lunettes de soleil bambou"></div>
      <h3>Lunettes de soleil bambou</h3>
      <p class="desc">Monture bois naturel, look Ã©co &amp; recyclable.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Lunettes de soleil bambou',18)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 18â€¯â‚¬</span></button>
      </div>
    </div>
    <!--produit 3-->
    <div class="carte-produit" data-categorie="Mode">
      <div class="photo-produit"><img src="img/makeup naturel.jpeg" alt="makeup naturel"></div>
      <h3>makeup naturel</h3>
      <p class="desc">Benifique pour la peau ,ne cause pas d'alergie ,a base de nature ,embalage durable ,Ã©legant &amp; recyclable.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('makeup naturel',50)" >Ajouter au panier <span class="tooltip">Prixâ€¯: 50â€¯â‚¬</span></button>
      </div>
    </div>
  </div>

  <!--CatÃ©gorie 4-->
  <h2 class="categorie-label">Enfants &amp; Divers</h2>
  <div class="produits-cat">
    <!--produit 1-->
    <div class="carte-produit" data-categorie="Enfants">
      <div class="photo-produit"><img src="img/Jouet en bois FSC.jpg" alt="Jouet en bois FSC"></div>
      <h3>Jouet en bois FSC</h3>
      <p class="desc">Sans peinture toxique, bois local, parfait dÃ¨s 2 ans.</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Jouet en bois FSC',12)" >Ajouter au panier <span class="tooltip">Prix : 12 â‚¬</span></button>
      </div>
    </div>
    <!--produit 2-->
    <div class="carte-produit" data-categorie="Enfants">
      <div class="photo-produit"><img src="img/Composteur cuisine.jpg" alt="Composteur cuisine"></div>
      <h3>Composteur cuisine</h3>
      <p class="desc">Compact, sans odeur, valorise vos biodÃ©chets !</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Composteur cuisine',24)" >Ajouter au panier <span class="tooltip">Prix : 24 â‚¬</span></button>
      </div>
    </div>
    <!--produit 3-->
    <div class="carte-produit" >
      <div class="photo-produit"><img src="img/Lunch Box.jpeg" alt="Lunch Box"></div>
      <h3>Lunch Box</h3>
      <p class="desc">Sans peinture toxique, bois local, bonne fermiture, legere lors de transport .</p>
      <div class="cta-row">
        <button class="acheter-btn" onclick="ajouterAuPanier('Lunch Box',25)" >Ajouter au panier <span class="tooltip">Prix : 25 â‚¬</span></button>
      </div>
    </div>
  </div>
</section>


<!-- div panier -->
 <section id="panier">
  <h3>Votre panier</h3>
  <ul id="liste-panier"></ul>  <!-- liste pour les articles selectiionnÃ©es -->
  <p>Total : <span id="total">0</span> â‚¬</p> <!--  pour le prix totale-->
  <button id="payer" style="display:none;">ProcÃ©der au paiement</button>
  <div id="confirmation"></div>
</section>
</main>

<!-- song de boutons -->
<audio id="clickSound" src="song/click.mp3"></audio>
<audio id="paySound" src="song/pay.mp3"></audio>

<script >

const clickSound = document.getElementById('clickSound');
const paySound   = document.getElementById('paySound');

function playClick() {
  clickSound.currentTime = 0; // garantit que, mÃªme si l'utilisateur clique plusieurs fois d'affilÃ©e, le son repart toujours du dÃ©but
  clickSound.play(); //Activatiion du song
};

function playPay() {
  paySound.currentTime = 0;
  paySound.play();
};

/////////////////////////////////////////////////

// panier 
// utilisation de local storage pour conserver les achats meme en rafraichant la page
let panier = JSON.parse(localStorage.getItem('panier')) || []; // tableau des articles a acheter initialiser d'aprÃ©s localStorage s'il existe sinon vide


function ajouterAuPanier(nom, prix) {  // fontion appeler lors de clic sur le bouton d'achat dans chaque article ,                      
  playClick(); // appel de fontion playClick pour activer le son
  panier.push({nom, prix}); // ajout de l'article (objet contenant le nom et le prix) clickÃ© dans le tableau panier
  localStorage.setItem('panier', JSON.stringify(panier)); // ajouter l'article dans le stokage locale
  actualiserPanier(); // ajouter le nouvelle article avec son bouton de supression dans la liste de panier en appelant la fonction actualiserPanier
}


function supprimerDuPanier(index) {  // supprimer un article deja ajoutÃ©
  panier.splice(index, 1); // effacer l'article du tableau panier
  localStorage.setItem('panier', JSON.stringify(panier)); // actualiser le panier dans localstorage
  actualiserPanier(); // actualiser la liste des articles
}


//met Ã  jour lâ€™affichage du panier dans la page et recalcule le total Ã  chaque changement
function actualiserPanier() { 
  // Mise Ã  jour de la liste des produits
  let liste = document.getElementById('liste-panier'); //RÃ©cupÃ©rer l'element ul de div Panier que va contenir les lignes de produits
  liste.innerHTML = '';  //vider complÃ¨tement la liste pour la reconstruire depuis le tableau liste

  panier.forEach((item, index) => { // a chaque article figurant dans le tableau panier :
    let li = document.createElement('li');  // on crÃ©e une balise li ( ligne )
    li.textContent = item.nom + " - " + item.prix + "â‚¬ ";  // remplir la ligne avec le contenue de cette case de tableau
    let btnSuppr = document.createElement('button');  // crer un bouton suprimer 
    btnSuppr.textContent = "Supprimer"; 
    btnSuppr.onclick = function() { supprimerDuPanier(index); }; // permettre ka suppression de la ligne lors de la click sur lr bouton
    li.appendChild(btnSuppr);  // placer le bouton supprimer dans la ligne li
    liste.appendChild(li); // placer la ligne li dans la liste ul dans div Panier
  });
  // Calcul et affichage du total
  let total = panier.reduce((s, i) => s + i.prix, 0);     // la mÃ©thod rÃ©duce :synthaxe ::array.reduce(callback, initialValue)â€‹ elle applique un calback qui est un 
                                                          // accumulateur qui traite chaque valeur de tableau afin de les rÃ©duires en une seule + s initialiser Ã  0
  document.getElementById('total').textContent = total; // afficher le totale 
  document.getElementById('payer').style.display = total > 0 ? "inline-block" : "none"; // changer la visibilitÃ© du bouton : visible si totale >0 et cachÃ© sinon
}


// payer et viser la liste des articles achetÃ©s los du click sur le bouton payer
document.getElementById('payer').onclick = function() { // fonction qui tourne en appuyant sur le bouton payer
  playPay(); // Activer le son 
  document.getElementById('confirmation').textContent = "Un petit geste pour vous, mais un grand pas pour lâ€™environnement, merci!"; // afficher le message de confirmatoion
  panier = [];  // vider le panier
  localStorage.setItem('panier', JSON.stringify(panier)); // vider le panier dans localStorage
  actualiserPanier(); // vider la liste dans div Panier
  setTimeout(function() {  //effacer le message de confirmation apres 3s
    document.getElementById('confirmation').textContent = "";
  }, 3000);
};

actualiserPanier(); // appel de la fonction actualiser panier
                   // permet de lire le contenue existant de panier dans localStorage et l'afficher lors de chargement de la page 

// filtreage des produits - Bare de recherche selon le nom et la description
function filtrerProduits() { 
    let query = document.getElementById("searchBar").value.toLowerCase(); // extraire le text ecrit dans la bare en miniscule 
    let produits = document.querySelectorAll(".carte-produit"); // liste des produits avec leurs noms et descriptions

    produits.forEach(produit => {
        let nom = produit.querySelector("h3").textContent.toLowerCase(); // variable contenant le nom de produit en miniscule
        let desc = produit.querySelector(".desc").textContent.toLowerCase(); // variable contenant la description de produit en miniscule

        if (nom.includes(query) || desc.includes(query)) { // Tester si la chaine Ã©crite dans la bare de recherche figure dans le nom ou la description
            produit.style.display = "flex";  // si oui on laise la carte de produit visible
        } else {
            produit.style.display = "none";  // si non on la rend invisible
        }
    });
} // remarque: le fitrage est actualiser avec chaque keydown sur la barre de recherche d'ou en effacant son contenue tout les carte revient visibles automatiquement



      // Merci pour votre attention! tous ðŸ’—
</script>
</body>
</html>


